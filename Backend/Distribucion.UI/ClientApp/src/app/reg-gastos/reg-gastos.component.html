
  <div class="container">
    <h3 class="title">Registro de Gastos</h3>
    <div class="border">
      <div class=" cuadros-group">
        <!-- <h3>{{estadoBoton1}}-{{estadoBoton2}}-{{validFechas1}}-{{validFechas2}}-{{validMonto}}</h3>-->
        <div class="input-group">
          <input style="padding: 2px;" type="date" #fechaIni [(ngModel)]="fInicio" name="fInicio" class="active form-control" (change)="captureNewFechaInicio(fechaIni.value); revisarFechaGastos(fechaIni.value, fechaFin.value); revisarFechasEntreSi(fechaIni.value, fechaFin.value); enableBtnRegistrar(); enableBtnGuardar();">
          <label>Desde:</label>
        </div>
        <div class="input-group">
          <input style="padding: 2px;" type="date" #fechaFin [(ngModel)]="fFin" name="fFin" class="active form-control" (change)="captureNewFechaFin(fechaFin.value); revisarFechaGastos(fechaIni.value, fechaFin.value); revisarFechasEntreSi(fechaIni.value, fechaFin.value); enableBtnRegistrar(); enableBtnGuardar();">
          <label>Hasta:</label>
        </div>
        <div class="input-group">
          <select class="form-control" [(ngModel)]="tGasto" name="tGasto" (change)='getInsumo(); enableBtnRegistrar();' aria-placeholder="Seleccione tipo de gasto" onblur="checkInput(this)">
            <option value="Diesel">Diesel</option>
            <option value="Ayudante 1">Ayudante 1</option>
            <option value="Ayudante 2">Ayudante 2</option>
            <option value="Casa">Administrador</option>
            <option value="Sunat">Sunat</option>
            <option value="Otros">Otros</option>
          </select>
          <label>Tipo de Gasto:</label>
        </div>
        <div class="input-group">
          <input type="number" [(ngModel)]="mMonto" name="mMonto" #newMon class="form-control" (keyup)="checkDetalle(); checkVacio(newMon.value); enableBtnRegistrar();" onblur="checkInput(this)">
          <label>Monto:</label>
        </div>

          <div class="input-group">
            <label>Comentario:</label>
            <textarea [(ngModel)]="comentario" rows="3" cols="50" class="form-control" onblur="checkInput(this)"></textarea>
          </div>

      </div>
       <button [disabled]="estadoBoton1" (click)="addGastoToArray()" style="margin:0">Registrar</button>
      
       <div>
         <div class="alert alert-warning  fade show" *ngIf="!validFechas1 && fInicio != null && fFin != null" role="alert">
           No se admite fecha Inicio mayor a fecha Fin.
         </div>
         <div class="alert alert-warning  fade show" *ngIf="!validFechas2 && fInicio != null && fFin != null" role="alert">
           Existe un gasto registrado en el rango de fechas ingresado.
         </div>
         <div class="alert alert-warning  fade show" *ngIf="!validMonto" role="alert">
           No se admiten montos menores o iguales a 0.
         </div>
         <div class="alert alert-warning  fade show" *ngIf="rangeDateExceed && fInicio != null && fFin != null" role="alert">
           La fecha final no se encuentra en la misma semana que la fecha de inicio.
         </div>
       </div>
      </div>

      <div class="col-md-12" style="text-align:center">
        <h4 class="subtitle">
          Monto Total del Gasto:
          {{gasto.gastoTotal | currency: "S/":2 }}
        </h4>
        <br />
      </div>
      <div class="col-md-12 border" style="padding: 0px">

        <kendo-grid [data]="compraverificarKendo" [pageable]="true" [pageSize]="pageSize" [skip]="skip" (pageChange)="pageChange($event)">

          <kendo-grid-column field="insumo" title="Tipo Gasto" width="65"></kendo-grid-column>
          <kendo-grid-column field="gasto" title="Monto" width="100"></kendo-grid-column>

          <kendo-grid-column title="" field="index" width="85">
            <ng-template kendoGridCellTemplate let-dataItem>
              <a (click)="guardarId(dataItem.gastoSemanalDetalleId); openMod('modal-gasto-delete')"><i class="icon-delete" style="font-size:20px"></i></a>
            </ng-template>
          </kendo-grid-column>
        </kendo-grid>

        <!--<table border="0" cellpadding="0" cellspacing="0" class="tbl-content">
          <thead>
            <tr>
              <th>Tipo de Gasto</th>
              <th>Monto</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let o of gastoDetalleArray">
              <td>{{o.insumo}}</td>
              <td>{{o.gasto | currency: "S/":2}}</td>
              <td><a (click)="guardarId(o.gastoSemanalDetalleId); openMod('modal-gasto-delete')"><i class="icon-delete" style="font-size:20px"></i></a></td>
            </tr>
          </tbody>
        </table>-->
      </div>
      <div style="text-align:center">
        <button style="margin:0" class="btn btn-success" (click)="openMod('modal-gasto-registrar')" [disabled]="estadoBoton2">Guardar</button>
      </div>
    </div>


<!-- Modal Confirmar-->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmación</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ¿Seguro que desea eliminar gasto?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal" (click)="deleteFromGastoArray()">Sí</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Eliminar-->
<div class="modal" id="modal-gasto-delete">
  <div class="cd-popup-container">
    <p>¿Desea eliminar el gasto?</p>
    <ul class="cd-buttons">
      <li><a (click)="deleteFromGastoArray(); closeMod('modal-gasto-delete')">Si</a></li>
      <li><a (click)="closeMod('modal-gasto-delete');">No</a></li>
    </ul>
    <a (click)="closeMod('modal-gasto-delete')" class="cd-popup-close img-replace">Close</a>
  </div>
</div>

<!-- Modal Enviar-->
<div class="modal" id="modal-gasto-registrar">
  <div class="cd-popup-container">
    <p>¿Desea registrar el gasto?</p>
    <ul class="cd-buttons">
      <li><a (click)="enviarGastoTotal(); closeMod('modal-gasto-registrar');">Si</a></li>
      <li><a (click)="closeMod('modal-gasto-registrar');">No</a></li>
    </ul>
    <a (click)="closeMod('modal-gasto-registrar')" class="cd-popup-close img-replace">Close</a>
  </div>
</div>

<div>
  <div class="sweet-overlay" tabindex="-1" style="opacity: 0; display: none;">
  </div>
  <div class="sweet-alert hideSweetAlert" tabindex="-1" data-has-cancel-button="false" data-allow-ouside-click="false" data-has-done-function="false" style="display: none; margin-top: -176px; opacity: -0.01;">
    <div class="icon error" style="display: block;">
      <span class="x-mark"><span class="line left"></span><span class="line right"></span></span>
    </div>
    <div class="icon warning" style="display: none;">
      <span class="body"></span> <span class="dot"></span>
    </div>
    <div class="icon info" style="display: none;">
    </div>
    <div class="icon success" style="display: none;">
      <span class="line tip"></span> <span class="line long"></span>
      <div class="placeholder">
      </div>
      <div class="fix"></div>
    </div>
    <div class="icon custom" style="display: none;"></div>
    <h2>Cancelled</h2>
    <p style="display: block;">Your imaginary file is safe :)</p>
    <button class="cancel" tabindex="-1" style="display: none; box-shadow: none;">Cancel</button>
    <button class="confirm" tabindex="-1" style="display: none; box-shadow: none;">OK</button>
    <button class="btn w-xs btn-info" tabindex="-1" style="display:none;  box-shadow: none;">Cerrar</button>
  </div>
</div>
